(()=>{var m=e=>e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement,u=e=>m(e)?[e]:[...e.querySelectorAll("input, select, textarea")];var k=e=>{e.type==="checkbox"||e.type==="radio"?e.checked=!1:e.value=""};var w=e=>{let F=e.getFormElem()[0],r=document.querySelector(`[data-marketo-id="${e.getId()}"]`);if(!r)return;let p=r.querySelector(".w-form-fail"),c=[],v=()=>{let l=r.querySelectorAll("[data-marketo-id]");for(let o of l){let t=F.querySelector(`#${o.dataset.marketoId}`);!t||(t.type!==o.type&&o.setAttribute("type",t.type),c.push({webflowField:o,marketoField:t}))}},b=(l,o)=>{let t=l==="webflowField"?"marketoField":"webflowField",i=c.find(n=>n[t]===o);if(i)return i[l]},h=()=>{let l=t=>{for(let i of t){for(let n of i.addedNodes){if(!(n instanceof Element))continue;let s=u(n);if(!!s.length)for(let a of s){let d=a.id,f=r.querySelector(`[data-marketo-id="${d}"]`);f&&c.push({webflowField:f,marketoField:a})}}for(let n of i.removedNodes){if(!(n instanceof Element))continue;let s=u(n);if(!!s.length)for(let a of s){let d=b("webflowField",a);!d||(k(d),c.filter(f=>f.webflowField!==d))}}}};new MutationObserver(l).observe(F,{subtree:!0,childList:!0})},y=l=>{let o=l.target;if(!m(o))return;let t=b("marketoField",o);if(!!t){switch(o.type){case"checkbox":case"radio":if(!(t instanceof HTMLInputElement)||t.type!=="checkbox"&&t.type!=="radio")break;t.checked=o.checked;break;default:t.value=o.value}t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0}))}},E=()=>{!p||(p.style.display="block")},M=l=>{if(!e.validate()){l.preventDefault(),l.stopPropagation(),E();return}e.submit()};v(),h(),r.addEventListener("input",y),r.addEventListener("submit",M)},I=w;window.formMirroring={marketo:w};})();
