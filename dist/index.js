(()=>{var p=e=>e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement,k=e=>p(e)?[e]:[...e.querySelectorAll("input, select, textarea")],y=(e,l)=>{switch(e.type){case"checkbox":l.value=`${e.checked}`;break;case"radio":{let r=e.closest("form"),s=r==null?void 0:r.querySelector(`input[name="${e.name}"]:checked`);s&&(l.value=s.value);break}default:l.value=e.value}},v=e=>{e.type==="checkbox"||e.type==="radio"?e.checked=!1:e.value=""};var E=e=>{let l=e.getFormElem()[0],r=document.querySelector(`[data-marketo-id="${e.getId()}"]`);if(!r)return;let s=r.querySelector(".w-form-fail"),c=[],b=()=>{let d=r.querySelectorAll("[data-marketo-id]");for(let n of d){let t=l.querySelector(`#${n.dataset.marketoId}`);!t||(t.type!==n.type&&n.setAttribute("type",t.type),c.push({webflowField:n,marketoField:t}))}console.log({fieldsRelationStore:c})},i=(d,n)=>{let t=d==="webflowField"?"marketoField":"webflowField",F=c.find(a=>a[t]===n);if(F)return F[d]},o=()=>{let d=t=>{for(let F of t){for(let a of F.addedNodes){if(!(a instanceof Element))continue;let m=k(a);if(console.log({formFields:m}),!!m.length)for(let w of m){let u=w.id,h=r.querySelector(`[data-marketo-id="${u}"]`);h&&c.push({webflowField:h,marketoField:w}),console.log({fieldsRelationStore:c})}}for(let a of F.removedNodes){if(!(a instanceof Element))continue;let m=k(a);if(console.log({formFields:m}),!!m.length)for(let w of m){let u=i("webflowField",w);!u||(v(u),c.filter(h=>h.webflowField!==u),console.log({fieldsRelationStore:c}))}}}};new MutationObserver(d).observe(l,{subtree:!0,childList:!0})},f=d=>{let n=d.target;if(!p(n))return;let t=i("marketoField",n);if(console.log({marketoField:t}),!!t){switch(n.type){case"checkbox":case"radio":if(!(t instanceof HTMLInputElement)||t.type!=="checkbox"&&t.type!=="radio")break;t.checked=n.checked;break;default:t.value=n.value}t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0}))}},T=()=>{!s||(s.style.display="block")},x=d=>{if(!e.validate()){d.preventDefault(),d.stopPropagation(),T();return}e.submit()};b(),o(),r.addEventListener("input",f),r.addEventListener("submit",x)},M=E;window.formMirroring={marketo:E};var L=e=>{var b;let l=document.querySelector(e);if(!l)return;let r=l.querySelectorAll('input[type="checkbox"], input[type="radio"], select'),s=new Map;for(let i of r){let o=(b=[...s].find(f=>i.name===f[1].name))==null?void 0:b[1];o||(o=document.createElement("input"),o.type="hidden",o.name=i.name,y(i,o),l.append(o)),i.name=`_${i.name}`,s.set(i,o)}let c=i=>{let o=i.target;if(!p(o))return;let f=s.get(o);!f||y(o,f)};l.addEventListener("input",c)},g=L;window.formMirroring={mailchimp:L};var I={marketo:M,mailchimp:g};window.formMirroring=I;})();
